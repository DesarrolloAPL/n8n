{
  "updatedAt": "2026-02-03T19:19:58.231Z",
  "createdAt": "2026-02-03T16:36:10.525Z",
  "id": "KC-z-m7pQKyBIz5wqgK6C",
  "name": "respaldar workflows en github",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "filters": {},
        "requestOptions": {}
      },
      "id": "a2613c7e-3290-40f9-a620-53efc7476f19",
      "name": "Captura de Workflows",
      "type": "n8n-nodes-base.n8n",
      "typeVersion": 1,
      "position": [
        1472,
        304
      ],
      "alwaysOutputData": false,
      "credentials": {
        "n8nApi": {
          "id": "zg5AoTyWH6eHCN1N",
          "name": "n8n account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        1920,
        304
      ],
      "id": "ec33582c-882c-487e-8838-3636b834a5a1",
      "name": "Loop Over Items"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [
        2144,
        32
      ],
      "id": "911ae295-14cb-4485-a9b7-50a84b53c63e",
      "name": "No Operation, do nothing"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {}
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        576,
        304
      ],
      "id": "ecc8091f-cb9e-4bb6-8d94-7b4c7be34e72",
      "name": "Nodo Programado"
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "edit",
        "owner": {
          "__rl": true,
          "value": "={{ $('Establecer campos').item.json['Repository Owner'] }}",
          "mode": "name"
        },
        "repository": {
          "__rl": true,
          "value": "={{ $('Establecer campos').item.json['Repository Name'] }}",
          "mode": "name"
        },
        "filePath": "={{ $binary.data.fileName }}",
        "binaryData": true,
        "commitMessage": "={{ $('Establecer campos').item.json.commitDate }}",
        "additionalParameters": {
          "branch": {
            "branch": "main"
          }
        }
      },
      "id": "d4f3cafe-fdc4-4d5a-9a77-c2b890c9688e",
      "name": "Actualizador de Archivos",
      "type": "n8n-nodes-base.github",
      "typeVersion": 1,
      "position": [
        2368,
        304
      ],
      "webhookId": "ad758c2a-4f50-4db1-a3f3-a422c67ac0a2",
      "credentials": {
        "githubApi": {
          "id": "JSM7j5N6Q11pzXJo",
          "name": "DesarrolloAPL"
        }
      }
    },
    {
      "parameters": {
        "resource": "file",
        "owner": {
          "__rl": true,
          "value": "={{ $('Establecer campos').item.json['Repository Owner'] }}",
          "mode": "name"
        },
        "repository": {
          "__rl": true,
          "value": "={{ $('Establecer campos').item.json['Repository Name'] }}",
          "mode": "name"
        },
        "filePath": "={{ $binary.data.fileName }}",
        "binaryData": true,
        "commitMessage": "={{ $('Establecer campos').item.json.commitDate }}",
        "additionalParameters": {
          "branch": {
            "branch": "main"
          }
        }
      },
      "id": "662c9873-fba0-4c8c-8dc3-6c76da0605e9",
      "name": "Uploader de Archivos",
      "type": "n8n-nodes-base.github",
      "typeVersion": 1,
      "position": [
        2368,
        496
      ],
      "webhookId": "3ba252a0-adac-44b6-9376-d870f52e28bd",
      "credentials": {
        "githubApi": {
          "id": "JSM7j5N6Q11pzXJo",
          "name": "DesarrolloAPL"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "a1d52ea6-5912-4988-94c2-115ad59c1996",
              "name": "Repository Owner",
              "value": "DesarrolloAPL",
              "type": "string"
            },
            {
              "id": "1c15b2e1-bf09-4643-8bba-3215119d2d6b",
              "name": "Repository Name",
              "value": "n8nbackups",
              "type": "string"
            },
            {
              "id": "712f49ff-8f02-4ac3-aee8-11db8ebe5843",
              "name": "commitDate",
              "value": "={{ (() => {\n  const now = new Date();\n  const day = String(now.getDate()).padStart(2, '0');\n  const month = String(now.getMonth() + 1).padStart(2, '0');\n  const year = now.getFullYear();\n  const hours = String(now.getHours()).padStart(2, '0');\n  const minutes = String(now.getMinutes()).padStart(2, '0');\n  return `${day}-${month}-${year}/${hours}:${minutes}`;\n})() }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        800,
        304
      ],
      "id": "1118bad5-ef90-4378-871f-300d655862b8",
      "name": "Establecer campos"
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "list",
        "owner": {
          "__rl": true,
          "value": "={{ $json[\"Repository Owner\"] }}",
          "mode": "name"
        },
        "repository": {
          "__rl": true,
          "value": "={{ $json['Repository Name'] }}",
          "mode": "name"
        }
      },
      "type": "n8n-nodes-base.github",
      "typeVersion": 1.1,
      "position": [
        1024,
        304
      ],
      "id": "9cbf7e90-468a-4852-bf76-688ab8500752",
      "name": "Listar archivos",
      "webhookId": "05c29369-ddf5-4cea-ad82-2360b9460243",
      "alwaysOutputData": true,
      "credentials": {
        "githubApi": {
          "id": "JSM7j5N6Q11pzXJo",
          "name": "DesarrolloAPL"
        }
      },
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "mode": "jsonToBinary",
        "options": {
          "fileName": "={{ $json.name.replace(/\\s+/g, '-').toLowerCase() }}-{{ $json.id }}.json"
        }
      },
      "id": "f410d7c4-ec38-4c49-bc11-91312c5a7722",
      "name": "Convertir a binario",
      "type": "n8n-nodes-base.moveBinaryData",
      "typeVersion": 1,
      "position": [
        1696,
        304
      ]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $node['Combinar archivos'].json.name }}",
              "operation": "contains",
              "value2": "={{ $binary.data.fileName }}"
            }
          ]
        }
      },
      "id": "7e4fed20-6d51-4093-9808-e1929da58565",
      "name": "Si existe",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        2144,
        224
      ]
    },
    {
      "parameters": {
        "content": "#  ðŸ¦¾Respalda tus workflows en github\n\n### Agradecimiento a: Matias Astudillo, miembro de Vibe Community VIP\n### Ãšnete a la [comunidad exclusiva](https://www.skool.com/vibe-community-vip/about) \n\n![captura](https://subir-imagen.com/images/2025/07/28/Captura-de-pantalla-2025-07-28-171752.png)",
        "height": 512,
        "width": 624,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1008,
        -352
      ],
      "id": "5cbec87c-e1a3-471e-812e-bff52a87981a",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "## ðŸ›¡ï¸ Workflow de Respaldo AutomÃ¡tico de Workflows en N8N\n\nEste workflow se ejecuta **diariamente a las 12:00 a.m.** y respalda todos los workflows de N8N en un repositorio de GitHub.\n\n---\n\n### âš™ï¸ ConfiguraciÃ³n Inicial\n\n* **Repository Owner**: tu usuario de GitHub\n* **Repository Name**: nombre del repositorio\n* **Commit Date**: fecha y hora actual (`DD-MM-YYYY/HH:SS`)\n\n---\n\n### ðŸ” AutenticaciÃ³n\n\n**GitHub:**\n\n1. Crea un repositorio en GitHub.\n2. Ve a `Settings > Developer Settings > Tokens (classic)`.\n3. Genera un token con permisos (`write-packages`).\n4. Usa el token en las credenciales de GitHub en N8N.\n\n**N8N:**\n\n1. Ve a `Settings > API` en tu instancia.\n2. Genera un token.\n3. Usa como Base URL:\n\n   ```\n   https://TU_INSTANCIA.com/api/v1\n   ```\n---\n\n### ðŸ”„ Flujo del Proceso\n\n1. Se listan los archivos actuales del repositorio (GitHub).\n2. Se obtienen todos los workflows desde N8N (JSON).\n3. Se convierten a binario.\n4. En un loop:\n\n   * Si el archivo existe â†’ se actualiza.\n   * Si no existe â†’ se sube como nuevo.\n\n---\n\n### âœ… Resultado\n\nTodos los workflows quedan respaldados en GitHub con un commit que incluye la fecha y hora.\n\n\n\n",
        "height": 1168,
        "width": 928,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -448,
        -352
      ],
      "id": "7eb6c108-943a-468e-a9bc-2d7f1b4db6f6",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "name"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        1248,
        304
      ],
      "id": "252f5faf-b192-4840-97c8-6b5daa245bbb",
      "name": "Combinar archivos"
    },
    {
      "parameters": {
        "operation": "toJson",
        "options": {}
      },
      "type": "n8n-nodes-base.convertToFile",
      "typeVersion": 1.1,
      "position": [
        2320,
        128
      ],
      "id": "71bbe54d-f557-46f0-943f-8ac389f832a8",
      "name": "Convert to File"
    }
  ],
  "connections": {
    "Captura de Workflows": {
      "main": [
        [
          {
            "node": "Convertir a binario",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "No Operation, do nothing",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Si existe",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Nodo Programado": {
      "main": [
        [
          {
            "node": "Establecer campos",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Actualizador de Archivos": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Uploader de Archivos": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Establecer campos": {
      "main": [
        [
          {
            "node": "Listar archivos",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Listar archivos": {
      "main": [
        [
          {
            "node": "Combinar archivos",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convertir a binario": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Si existe": {
      "main": [
        [
          {
            "node": "Convert to File",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Convert to File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Combinar archivos": {
      "main": [
        [
          {
            "node": "Captura de Workflows",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convert to File": {
      "main": [
        [
          {
            "node": "Actualizador de Archivos",
            "type": "main",
            "index": 0
          },
          {
            "node": "Uploader de Archivos",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "91a65216-87d4-4238-82aa-ae68be0c08d8",
  "activeVersionId": null,
  "triggerCount": 0,
  "shared": [
    {
      "updatedAt": "2026-02-03T16:36:10.530Z",
      "createdAt": "2026-02-03T16:36:10.530Z",
      "role": "workflow:owner",
      "workflowId": "KC-z-m7pQKyBIz5wqgK6C",
      "projectId": "qybvWgNPA3kFWQla"
    }
  ],
  "activeVersion": null,
  "tags": []
}